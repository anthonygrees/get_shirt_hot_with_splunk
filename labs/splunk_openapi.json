{
   "components":{
      "parameters":{
         "feature":{
            "description":"the feature the access rules apply towards",
            "in":"path",
            "name":"feature",
            "required":true,
            "schema":{
               "enum":[
                  "s2s",
                  "hec",
                  "search-ui",
                  "search-api",
                  "idm-api",
                  "idm-ui"
               ],
               "type":"string"
            }
         },
         "hec":{
            "description":"hec name",
            "in":"path",
            "name":"hec",
            "required":true,
            "schema":{
               "type":"string"
            }
         },
         "stack":{
            "description":"the stack name",
            "in":"path",
            "name":"stack",
            "required":true,
            "schema":{
               "type":"string"
            }
         }
      },
      "responses":{
         "defaultError":{
            "content":{
               "application/json":{
                  "schema":{
                     "$ref":"#/components/schemas/Error"
                  }
               }
            },
            "description":"unexpected error"
         }
      },
      "schemas":{
         "Error":{
            "properties":{
               "code":{
                  "type":"string"
               },
               "message":{
                  "type":"string"
               }
            },
            "required":[
               "code",
               "message"
            ]
         },
         "HecInfo":{
            "properties":{
               "spec":{
                  "$ref":"#/components/schemas/HecSpec"
               },
               "token":{
                  "type":"string"
               }
            },
            "type":"object"
         },
         "HecSpec":{
            "properties":{
               "allowedIndexes":{
                  "items":{
                     "description":"allowed indices",
                     "type":"string"
                  },
                  "type":"array"
               },
               "defaultHost":{
                  "type":"string"
               },
               "defaultIndex":{
                  "type":"string"
               },
               "defaultSource":{
                  "type":"string"
               },
               "defaultSourcetype":{
                  "type":"string"
               },
               "disabled":{
                  "type":"boolean"
               },
               "name":{
                  "type":"string"
               }
            }
         },
         "StackStatus":{
            "properties":{
               "infrastructure":{
                  "properties":{
                     "status":{
                        "description":"the status of the infrastructure 1) Ready - The stack is ready, and infrastructure is up to date. 2) Pending - The stack has some pending changes that haven't been applied to the stack yet. The changes could be internal system changes for stacks or user requested changes like modification to allow lists. 3) Failed - There were some errors while applying changes to the stacks were being applied. The changes could be internal system changes for stacks or user requested changes like modification to allow lists. User should reach out to Splunk support for resolution.",
                        "type":"string"
                     }
                  },
                  "type":"object"
               }
            },
            "required":[
               "infrastructure"
            ]
         }
      },
      "securitySchemes":{
         "bearerAuth":{
            "bearerFormat":"JWT",
            "scheme":"bearer",
            "type":"http"
         }
      }
   },
   "info":{
      "description":"API for managing splunk cloud stacks. (c) 2020 Splunk Inc. All rights reserved. Access and use is subject to the Splunk General Terms (https://www.splunk.com/en_us/legal/splunk-general-terms.html) and Splunk's Website Terms and Conditions (https://www.splunk.com/en_us/legal/terms/terms-of-use.html).",
      "title":"Splunk Cloud Admin API",
      "version":"v1"
   },
   "openapi":"3.0.0",
   "paths":{
      "/{stack}/adminconfig/v1/access/{feature}/ipallowlists":{
         "delete":{
            "description":"delete existing ip subnets (if they exists) from where the splunk cloud stack feature is accessible from",
            "operationId":"DeleteSubnets",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               },
               {
                  "$ref":"#/components/parameters/feature"
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "properties":{
                           "subnets":{
                              "items":{
                                 "description":"ipv4 subnet e.g. 21.45.63.00/32",
                                 "type":"string"
                              },
                              "type":"array"
                           }
                        },
                        "type":"object"
                     }
                  }
               },
               "description":"the subnets to be deleted",
               "required":true
            },
            "responses":{
               "200":{
                  "description":"successfully deleted the forwarder ipallowlist"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "tags":[
               "allowlist"
            ],
            "x-auth-required":false
         },
         "get":{
            "description":"describe the allowlist with its status and subnets from where the feature is accessible from",
            "operationId":"DescribeAllowlist",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               },
               {
                  "$ref":"#/components/parameters/feature"
               }
            ],
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "properties":{
                              "subnets":{
                                 "description":"the subnets from where the stack feature is accessible from",
                                 "items":{
                                    "type":"string"
                                 },
                                 "type":"array"
                              }
                           },
                           "type":"object"
                        }
                     }
                  },
                  "description":"list of ip subnets"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "tags":[
               "allowlist"
            ],
            "x-auth-required":false
         },
         "post":{
            "description":"add subnets to the allowlist for the feature, if they don't already exist",
            "operationId":"AddSubnets",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               },
               {
                  "$ref":"#/components/parameters/feature"
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "properties":{
                           "subnets":{
                              "items":{
                                 "description":"ipv4 subnet e.g. 21.45.63.00/32",
                                 "type":"string"
                              },
                              "type":"array"
                           }
                        },
                        "type":"object"
                     }
                  }
               },
               "description":"the new subnets",
               "required":true
            },
            "responses":{
               "200":{
                  "description":"successfully added a new forwarder ipallowlist"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "tags":[
               "allowlist"
            ],
            "x-auth-required":false
         }
      },
      "/{stack}/adminconfig/v1/access/{feature}/ipallowlists/{subnet}":{
         "delete":{
            "description":"delete an existing ip subnet if it exists, from where the feature is accessible from",
            "operationId":"DeleteSubnet",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               },
               {
                  "$ref":"#/components/parameters/feature"
               },
               {
                  "description":"the subnet to be deleted",
                  "in":"path",
                  "name":"subnet",
                  "required":true,
                  "schema":{
                     "type":"string"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"successfully deleted the forwarder ipallowlist"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "tags":[
               "allowlist"
            ],
            "x-auth-required":false
         }
      },
      "/{stack}/adminconfig/v1/inputs/http-event-collectors":{
         "get":{
            "description":"List of all HEC objects",
            "operationId":"ListHECs",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               }
            ],
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "properties":{
                              "http_event_collectors":{
                                 "items":{
                                    "$ref":"#/components/schemas/HecInfo"
                                 },
                                 "type":"array"
                              }
                           },
                           "type":"object"
                        }
                     }
                  },
                  "description":"fetch all hec info"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "x-auth-required":false
         },
         "post":{
            "description":"Create hec token for the stack",
            "operationId":"CreateHEC",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/HecSpec"
                     }
                  }
               },
               "description":"Hec Info",
               "required":true
            },
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "properties":{
                              "http-event-collector":{
                                 "$ref":"#/components/schemas/HecInfo"
                              }
                           },
                           "type":"object"
                        }
                     }
                  },
                  "description":"successfully added a new hec"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "x-auth-required":false
         }
      },
      "/{stack}/adminconfig/v1/inputs/http-event-collectors/{hec}":{
         "delete":{
            "description":"delete HEC",
            "operationId":"DeleteHec",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               },
               {
                  "$ref":"#/components/parameters/hec"
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "type":"object"
                     }
                  }
               },
               "description":"Name of the HEC Object to be deleted",
               "required":true
            },
            "responses":{
               "200":{
                  "description":"successfully deleted hec token"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "x-auth-required":false
         },
         "get":{
            "description":"Get detailed Info about a particular HEC",
            "operationId":"DescribeHec",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               },
               {
                  "$ref":"#/components/parameters/hec"
               }
            ],
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "properties":{
                              "http-event-collector":{
                                 "$ref":"#/components/schemas/HecInfo"
                              }
                           },
                           "type":"object"
                        }
                     }
                  },
                  "description":"Hec Object Info"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "x-auth-required":false
         },
         "put":{
            "description":"Modify properties of HEC",
            "operationId":"UpdateHEC",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               },
               {
                  "$ref":"#/components/parameters/hec"
               }
            ],
            "requestBody":{
               "content":{
                  "application/json":{
                     "schema":{
                        "$ref":"#/components/schemas/HecSpec"
                     }
                  }
               },
               "description":"Modify Hec object",
               "required":true
            },
            "responses":{
               "200":{
                  "description":"successfully modified hec token"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "x-auth-required":false
         }
      },
      "/{stack}/adminconfig/v1/status":{
         "get":{
            "description":"describe the generic information about the stack",
            "operationId":"DescribeStack",
            "parameters":[
               {
                  "$ref":"#/components/parameters/stack"
               }
            ],
            "responses":{
               "200":{
                  "content":{
                     "application/json":{
                        "schema":{
                           "properties":{
                              "status":{
                                 "$ref":"#/components/schemas/StackStatus"
                              }
                           }
                        }
                     }
                  },
                  "description":"the stack status"
               },
               "default":{
                  "$ref":"#/components/responses/defaultError"
               }
            },
            "security":[
               {
                  "bearerAuth":[
                     
                  ]
               }
            ],
            "tags":[
               "system"
            ],
            "x-auth-required":false
         }
      }
   }
}
